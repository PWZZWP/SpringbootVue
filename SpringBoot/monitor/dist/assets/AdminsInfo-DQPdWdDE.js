/* empty css               *//* empty css                *//* empty css             *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css               *//* empty css              */import{r as g}from"./request-Cq_wt7Fs.js";/* empty css                    */import{r as U,a1 as F,c as _,a as i,d as o,w as r,B as h,A as B,J as A,K as L,L as q,o as b,g as m,b as I,Y as d,U as P,_ as T,$ as R,a0 as $}from"./index-B_OMzdnw.js";const j={class:"card",style:{"margin-bottom":"8px"}},D={class:"card",style:{"margin-top":"8px","margin-bottom":"20px"}},J=["src"],K={class:"dialog-footer"},te={__name:"AdminsInfo",setup(M){const e=U({name:null,dataList:[],total:0,pageNum:1,pageSize:10,formVisible:!1,form:{},ids:[],rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),c=F(),V=t=>{console.log(t.data),e.form.avatar=t.data},n=()=>{g.get("/admin/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(t=>{e.dataList=t.data.list,e.total=t.data.total})};n();const y=()=>{e.name=null,n()},v=()=>{c.value.validate(t=>{t&&(e.form.id?C():x())})},x=()=>{g.post("/admin/add",e.form).then(t=>{t.code==="200"?(d.success("操作成功"),n(),e.formVisible=!1):d.error(t.msg)})},C=()=>{g.put("/admin/update",e.form).then(t=>{t.code==="200"?(d.success("操作成功"),n(),e.formVisible=!1):d.error(t.msg)})},E=t=>{e.ids=t.map(a=>a.id),console.log(e.ids)};return(t,a)=>{const p=h,s=B,u=P,z=A,S=L,f=T,k=R,w=$,N=q;return b(),_("div",null,[i("div",j,[o(p,{clearable:"","prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=l=>e.name=l),placeholder:"请输入名称查询"},null,8,["modelValue"]),o(s,{type:"primary",color:"#87CEFA",onClick:n},{default:r(()=>a[7]||(a[7]=[m("查 询")])),_:1}),o(s,{type:"warning",color:"#FFFFE0",onClick:y},{default:r(()=>a[8]||(a[8]=[m("重 置")])),_:1})]),i("div",D,[o(z,{data:e.dataList,stripe:"",onSelectionChange:E},{default:r(()=>[o(u,{label:"账号",prop:"username"}),o(u,{label:"头像"},{default:r(l=>[l.row.avatar?(b(),_("img",{key:0,src:l.row.avatar,style:{width:"50px",height:"50px","border-radius":"50%"}},null,8,J)):I("",!0)]),_:1}),o(u,{label:"名称",prop:"name"})]),_:1},8,["data"])]),i("div",null,[o(S,{onSizeChange:n,onCurrentChange:n,"current-page":e.pageNum,"onUpdate:currentPage":a[1]||(a[1]=l=>e.pageNum=l),"page-size":e.pageSize,"onUpdate:pageSize":a[2]||(a[2]=l=>e.pageSize=l),"page-sizes":[5,10,15,20],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["current-page","page-size","total"])]),o(N,{title:"管理员信息",modelValue:e.formVisible,"onUpdate:modelValue":a[6]||(a[6]=l=>e.formVisible=l),width:"500","destroy-on-close":""},{footer:r(()=>[i("div",K,[o(s,{onClick:a[5]||(a[5]=l=>e.formVisible=!1)},{default:r(()=>a[10]||(a[10]=[m("取消")])),_:1}),o(s,{onClick:v,type:"primary"},{default:r(()=>a[11]||(a[11]=[m("保存")])),_:1})])]),default:r(()=>[o(w,{ref_key:"formRef",ref:c,rules:e.rules,model:e.form,"label-width":"80px",style:{"padding-right":"50px"}},{default:r(()=>[o(f,{label:"账号",prop:"username"},{default:r(()=>[o(p,{disabled:e.form.id,modelValue:e.form.username,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.username=l),autocomplete:"off",placeholder:"请输入账号"},null,8,["disabled","modelValue"])]),_:1}),o(f,{label:"头像"},{default:r(()=>[o(k,{action:"http://localhost:9090/files/upload","list-type":"picture","on-success":V},{default:r(()=>[o(s,{type:"primary"},{default:r(()=>a[9]||(a[9]=[m("上传头像")])),_:1})]),_:1})]),_:1}),o(f,{label:"名称",prop:"name"},{default:r(()=>[o(p,{modelValue:e.form.name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.name=l),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{te as default};
