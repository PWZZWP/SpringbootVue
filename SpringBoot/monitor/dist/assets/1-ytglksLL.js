/* empty css               *//* empty css               */import{r as n}from"./request-Cq_wt7Fs.js";import{a1 as c,a2 as h,c as _,a as u,d,w as p,O as m,Y as s,C as V,A as k,o as i,P as w,g as f,h as B,V as E}from"./index-B_OMzdnw.js";const N={class:"capture-control"},x={class:"traffic-chart"},I={ref:"chart",style:{width:"100%",height:"400px"}},O={__name:"1",setup(M){const o=c([]),r=c(""),l=c(!1);h(async()=>{try{const a=await n.get("/api/netInter");a&&(o.value=a.map(e=>({value:e.value,label:`${e.label} (${e.value})`})),console.log("Available NICs:",o.value))}catch{}});const g=async()=>{var a;try{console.log("Selected NIC:",r.value);const e={nic:r.value};await n.post("/capture/start",e),l.value=!0,s.success("Capture started")}catch(e){console.error("Capture start error:",e),s.error("Error: "+(((a=e.response)==null?void 0:a.data)||e.message))}},y=async()=>{try{const a=await n.post("/capture/stop");a&&a.data?(s.success(`已保存到 ${a.data}`),l.value=!1):s.error("停止捕获失败，响应数据为空")}catch(a){const e=a.response&&a.response.data?a.response.data:a.message;s.error("停止失败: "+e)}};return(a,e)=>{const b=E,C=V,v=k;return i(),_(m,null,[u("div",N,[d(C,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),placeholder:"选择网卡"},{default:p(()=>[(i(!0),_(m,null,w(o.value,t=>(i(),B(b,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(v,{type:"primary",onClick:g,disabled:l.value},{default:p(()=>e[1]||(e[1]=[f(" 开始捕获 ")])),_:1},8,["disabled"]),d(v,{type:"danger",onClick:y,disabled:!l.value},{default:p(()=>e[2]||(e[2]=[f(" 停止并保存 ")])),_:1},8,["disabled"])]),u("div",x,[u("div",I,null,512)])],64)}}};export{O as default};
