/* empty css               *//* empty css                *//* empty css             *//* empty css              *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css               *//* empty css              */import{r as u}from"./request-Cq_wt7Fs.js";/* empty css                    */import{r as $,a1 as q,c as b,a as f,d as l,w as r,Y as i,Z as y,B as D,A as J,J as P,K as T,L as M,o as V,g as m,b as O,U as j,_ as G,$ as K,S as Y,D as Z,a0 as H}from"./index-B_OMzdnw.js";const Q={class:"card",style:{"margin-bottom":"8px"}},W={class:"card",style:{"margin-top":"8px"}},X={class:"card",style:{"margin-top":"8px","margin-bottom":"20px"}},ee=["src"],oe={class:"dialog-footer"},ge={__name:"UserInfo",setup(le){const e=$({name:null,dataList:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{},ids:[],rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),v=t=>{console.log(t.data),e.form.avatar=t.data},g=q(),n=()=>{u.get("/user/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(t=>{e.dataList=t.data.list,e.total=t.data.total})};n();const x=()=>{e.name=null,n()},C=()=>{e.formVisible=!0,e.form={}},E=()=>{g.value.validate(t=>{t&&(e.form.id?k():w())})},w=()=>{u.post("/user/add",e.form).then(t=>{t.code==="200"?(i.success("操作成功"),n(),e.formVisible=!1):i.error(t.msg)})},k=()=>{u.put("/user/update",e.form).then(t=>{t.code==="200"?(i.success("操作成功"),n(),e.formVisible=!1):i.error(t.msg)})},F=t=>{e.form=JSON.parse(JSON.stringify(t)),e.formVisible=!0},S=t=>{y.confirm("确认删除该用户吗？","提示",{type:"warning"}).then(()=>{u.delete("/user/deleteById/"+t).then(o=>{o.code==="200"?(i.success("操作成功"),n()):i.error(o.msg)})}).catch()},h=t=>{e.ids=t.map(o=>o.id),console.log(e.ids)},U=()=>{if(e.ids.length===0){i.error("请先选择要删除的用户");return}y.confirm("确认删除该用户吗？","提示",{type:"warning"}).then(()=>{u.delete("/user/deleteBatch/",{data:e.ids}).then(t=>{t.code==="200"?(i.success("操作成功"),n()):i.error(t.msg)})}).catch()};return(t,o)=>{const c=D,s=J,d=j,z=P,N=T,p=G,B=K,_=Y,A=Z,I=H,L=M;return V(),b("div",null,[f("div",Q,[l(c,{clearable:"","prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.name=a),placeholder:"请输入名称查询"},null,8,["modelValue"]),l(s,{type:"primary",color:"#87CEFA",onClick:n},{default:r(()=>o[9]||(o[9]=[m("查 询")])),_:1}),l(s,{type:"warning",color:"#FFFFE0",onClick:x},{default:r(()=>o[10]||(o[10]=[m("重 置")])),_:1})]),f("div",W,[l(s,{type:"primary",color:"#98F5FF",onClick:C},{default:r(()=>o[11]||(o[11]=[m("新 增")])),_:1}),l(s,{type:"warning",color:"#97FFFF",onClick:U},{default:r(()=>o[12]||(o[12]=[m("批量删除")])),_:1})]),f("div",X,[l(z,{data:e.dataList,stripe:"",onSelectionChange:h},{default:r(()=>[l(d,{type:"selection",width:"55"}),l(d,{label:"账号",prop:"username"}),l(d,{label:"名称",prop:"name"}),l(d,{label:"头像"},{default:r(a=>[a.row.avatar?(V(),b("img",{key:0,src:a.row.avatar,style:{width:"50px",height:"50px","border-radius":"50%"}},null,8,ee)):O("",!0)]),_:1}),l(d,{label:"性别",prop:"sex"}),l(d,{label:"描述",prop:"description","show-overflow-tooltip":""}),l(d,{label:"操作",width:"120"},{default:r(a=>[l(s,{onClick:R=>F(a.row),color:"#7EC0EE",type:"primary",icon:"Edit",circle:""},null,8,["onClick"]),l(s,{onClick:R=>S(a.row.id),type:"danger",icon:"Delete",circle:""},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),f("div",null,[l(N,{onSizeChange:n,onCurrentChange:n,"current-page":e.pageNum,"onUpdate:currentPage":o[1]||(o[1]=a=>e.pageNum=a),"page-size":e.pageSize,"onUpdate:pageSize":o[2]||(o[2]=a=>e.pageSize=a),"page-sizes":[5,10,15,20],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["current-page","page-size","total"])]),l(L,{title:"用户信息",modelValue:e.formVisible,"onUpdate:modelValue":o[8]||(o[8]=a=>e.formVisible=a),width:"500","destroy-on-close":""},{footer:r(()=>[f("div",oe,[l(s,{onClick:o[7]||(o[7]=a=>e.formVisible=!1)},{default:r(()=>o[14]||(o[14]=[m("取消")])),_:1}),l(s,{onClick:E,type:"primary"},{default:r(()=>o[15]||(o[15]=[m("保存")])),_:1})])]),default:r(()=>[l(I,{ref_key:"formRef",ref:g,rules:e.rules,model:e.form,"label-width":"80px",style:{"padding-right":"50px"}},{default:r(()=>[l(p,{label:"账号",prop:"username"},{default:r(()=>[l(c,{disabled:e.form.id,modelValue:e.form.username,"onUpdate:modelValue":o[3]||(o[3]=a=>e.form.username=a),autocomplete:"off",placeholder:"请输入账号"},null,8,["disabled","modelValue"])]),_:1}),l(p,{label:"头像"},{default:r(()=>[l(B,{action:"http://localhost:9090/files/upload","list-type":"picture","on-success":v},{default:r(()=>[l(s,{type:"primary"},{default:r(()=>o[13]||(o[13]=[m("上传头像")])),_:1})]),_:1})]),_:1}),l(p,{label:"名称",prop:"name"},{default:r(()=>[l(c,{modelValue:e.form.name,"onUpdate:modelValue":o[4]||(o[4]=a=>e.form.name=a),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),l(p,{label:"性别"},{default:r(()=>[l(A,{modelValue:e.form.sex,"onUpdate:modelValue":o[5]||(o[5]=a=>e.form.sex=a)},{default:r(()=>[l(_,{value:"男",label:"男"}),l(_,{value:"女",label:"女"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"描述"},{default:r(()=>[l(c,{rows:3,type:"textarea",modelValue:e.form.description,"onUpdate:modelValue":o[6]||(o[6]=a=>e.form.description=a),autocomplete:"off",placeholder:"请输入个人描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{ge as default};
